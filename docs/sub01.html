<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="robots" content="noindex,nofollow,noarchive" />

    <script>
      MathJax = {
        chtml: {
          displayAlign: "left",
          displayIndent: "1em",
        },
      };
    </script>

    

    <link rel="icon" href="favicon.ico" sizes="any" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c"
    />
    <link rel="stylesheet" href="style.css" />

    <title>基礎編2　Tkinter2 キーボード操作</title>
  </head>

  <body>
    <div class="openbtn"><span></span><span></span><span></span></div>
    <nav id="g-nav">
      <div id="g-nav-list">
        <!-- ---------------------------------------- -->
         <ul>
<li><a href="#もくじ" id="toc-もくじ"><span
class="toc-section-number">1</span> もくじ</a></li>
<li><a href="#キーボードの入力を判定する"
id="toc-キーボードの入力を判定する"><span
class="toc-section-number">2</span> キーボードの入力を判定する</a></li>
<li><a href="#if文を使って上下左右を判定する"
id="toc-if文を使って上下左右を判定する"><span
class="toc-section-number">3</span>
if文を使って上下左右を判定する</a></li>
<li><a href="#判定をもとに図形を移動させる"
id="toc-判定をもとに図形を移動させる"><span
class="toc-section-number">4</span>
判定をもとに図形を移動させる</a></li>
</ul> 
        <!-- ---------------------------------------- -->
      </div>
    </nav>

    <header class="markdown-body">
      <p>Pythonで釣りゲームを作ろう キーボード操作</p>
      <p>2024年04月23日（月)</p>
    </header>

    <main class="markdown-body">
      <!-- ---------------------------------------- -->
      <h1 data-number="1" id="もくじ"><span
      class="header-section-number">1</span> もくじ</h1>
      <ul>
      <li><a
      href="basic02.html#キーボードの入力を判定する">キーボードの入力を判定する</a></li>
      </ul>
      <p></br></p>
      <h1 data-number="2" id="キーボードの入力を判定する"><span
      class="header-section-number">2</span>
      キーボードの入力を判定する</h1>
      <p>Tkinterでは、キーボードの入力を判定することができます。以下の<strong>プログラムを実行し、適当なキーボードを押してみてください</strong>。</p>
      <p></br></p>
      <div class="sourceCode" id="cb1" data-caption="move-0.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> tkinter <span class="im">as</span> tk</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">import</span> os</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># ディレクトリ</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>cwd <span class="op">=</span> os.getcwd()</span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># ウィンドウ設置</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>root <span class="op">=</span> tk.Tk()</span>
<span id="cb1-9"><a href="#cb1-9"></a>root.title(<span class="st">&quot;move-0&quot;</span>)</span>
<span id="cb1-10"><a href="#cb1-10"></a>root.geometry(<span class="st">&quot;600x300&quot;</span>)</span>
<span id="cb1-11"><a href="#cb1-11"></a></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="co"># キャンバス設置</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>canvas <span class="op">=</span> tk.Canvas(root,width <span class="op">=</span> <span class="dv">600</span>,height <span class="op">=</span> <span class="dv">300</span>,bg <span class="op">=</span> <span class="st">&quot;skyblue&quot;</span>)</span>
<span id="cb1-14"><a href="#cb1-14"></a>canvas.pack()</span>
<span id="cb1-15"><a href="#cb1-15"></a></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co"># 四角形を配置</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>canvas.create_rectangle(<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">60</span>,<span class="dv">60</span>,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span>
<span id="cb1-18"><a href="#cb1-18"></a></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="co"># 押されたキーを出力する</span></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="kw">def</span> on_key_press(event):</span>
<span id="cb1-21"><a href="#cb1-21"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Key pressed: </span><span class="sc">{</span>event<span class="sc">.</span>keysym<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb1-22"><a href="#cb1-22"></a>    </span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="co"># キーが押されたときにon_key_pressを実行する</span></span>
<span id="cb1-24"><a href="#cb1-24"></a>root.bind(<span class="st">&quot;&lt;KeyPress&gt;&quot;</span>, on_key_press)</span>
<span id="cb1-25"><a href="#cb1-25"></a><span class="co"># メインループ</span></span>
<span id="cb1-26"><a href="#cb1-26"></a>root.mainloop()</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>Key pressed: Right
Key pressed: Left
Key pressed: s
Key pressed: s
Key pressed: d
Key pressed: d
Key pressed: d</code></pre>
      <p><code>20行目</code>から<code>24行目</code>に注目してください。</p>
      <div class="sourceCode" id="cb3" data-startFrom="19"
      data-caption="move-0.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 18;"><span id="cb3-19"><a href="#cb3-19"></a><span class="co"># 押されたキーを出力する</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="kw">def</span> on_key_press(event):</span>
<span id="cb3-21"><a href="#cb3-21"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Key pressed: </span><span class="sc">{</span>event<span class="sc">.</span>keysym<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb3-22"><a href="#cb3-22"></a>    </span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="co"># キーが押されたときにon_key_pressを実行する</span></span>
<span id="cb3-24"><a href="#cb3-24"></a>root.bind(<span class="st">&quot;&lt;KeyPress&gt;&quot;</span>, on_key_press)</span></code></pre></div>
      <p><code>20行目</code>では、<strong>キーボードが押されたときに実行される関数</strong>を設定しています。今回は、print文で押されたキーを出力します。</p>
      <p><code>24行目</code>では、<strong>キーボードが押されたとき先ほどの関数が実行されるように</strong>設定しています。bindメゾットによるトリガーを使えば、今回のようにキーを押したときだけでなく、キーを離したとき、マウスを動かしたときなど、様々なことを検出できます。<a
      href="https://denno-sekai.com/tkinter-bind/">この記事</a>に詳しく説明があります。</p>
      <p></br></p>
      <h1 data-number="3" id="if文を使って上下左右を判定する"><span
      class="header-section-number">3</span>
      if文を使って上下左右を判定する</h1>
      <p>先ほどのプログラムに手を加えて、移動方向を判定するプログラムを作成してみましょう。
      WASDキーに対応して、以下のような出力を出せたら完成です。</p>
      <pre><code>→
→
↓
↓
↓
↓
←</code></pre>
      <p>関数<code>on_key_press</code>の<strong>中身だけを改造して</strong>作成できます。以下のヒントをもとに自分で考えて、書いてみてください。
      新しいファイル<code>move-1.py</code>を作成して、そこに<code>move-0.py</code>の中身をコピーしてから作業してください。</p>
      <div class="sourceCode" id="cb5" data-startFrom="19"
      data-caption="ヒント"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 18;"><span id="cb5-19"><a href="#cb5-19"></a><span class="co"># 押されたキーを出力する</span></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="kw">def</span> on_key_press(event):</span>
<span id="cb5-21"><a href="#cb5-21"></a>    key <span class="op">=</span> event.keysym <span class="co"># 変数keyに「w」や「a」など、押したキーの名前が格納される</span></span>
<span id="cb5-22"><a href="#cb5-22"></a>    <span class="cf">if</span>(key <span class="op">==</span> <span class="st">&quot;w&quot;</span>): <span class="co"># 「w」が押されたとき</span></span>
<span id="cb5-23"><a href="#cb5-23"></a>        <span class="bu">print</span>(<span class="st">&quot;↑&quot;</span>)</span>
<span id="cb5-24"><a href="#cb5-24"></a>    <span class="cf">elif</span>(...   <span class="co">#以下省略</span></span></code></pre></div>
      <hr />
      <p>完成したら、以下の答えと照らし合わせて確認してください。</p>
      <hr />
      <p><strong><i class="fa-solid fa-terminal"></i> 答え</strong></p>
      <div class="sourceCode" id="cb6" data-caption="move-1.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1"></a><span class="im">import</span> tkinter <span class="im">as</span> tk</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="im">import</span> os</span>
<span id="cb6-3"><a href="#cb6-3"></a></span>
<span id="cb6-4"><a href="#cb6-4"></a><span class="co"># ディレクトリ</span></span>
<span id="cb6-5"><a href="#cb6-5"></a>cwd <span class="op">=</span> os.getcwd()</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a><span class="co"># ウィンドウ設置</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>root <span class="op">=</span> tk.Tk()</span>
<span id="cb6-9"><a href="#cb6-9"></a>root.title(<span class="st">&quot;move-1&quot;</span>)</span>
<span id="cb6-10"><a href="#cb6-10"></a>root.geometry(<span class="st">&quot;600x300&quot;</span>)</span>
<span id="cb6-11"><a href="#cb6-11"></a></span>
<span id="cb6-12"><a href="#cb6-12"></a><span class="co"># キャンバス設置</span></span>
<span id="cb6-13"><a href="#cb6-13"></a>canvas <span class="op">=</span> tk.Canvas(root,width <span class="op">=</span> <span class="dv">600</span>,height <span class="op">=</span> <span class="dv">300</span>,bg <span class="op">=</span> <span class="st">&quot;skyblue&quot;</span>)</span>
<span id="cb6-14"><a href="#cb6-14"></a>canvas.pack()</span>
<span id="cb6-15"><a href="#cb6-15"></a></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co"># 四角形を配置</span></span>
<span id="cb6-17"><a href="#cb6-17"></a>canvas.create_rectangle(<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">60</span>,<span class="dv">60</span>,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span>
<span id="cb6-18"><a href="#cb6-18"></a></span>
<span id="cb6-19"><a href="#cb6-19"></a><span class="kw">def</span> on_key_press(event):</span>
<span id="cb6-20"><a href="#cb6-20"></a>    key <span class="op">=</span> event.keysym <span class="co"># 変数keyに「w」や「a」など、押したキーの名前が格納される</span></span>
<span id="cb6-21"><a href="#cb6-21"></a>    <span class="cf">if</span>(key <span class="op">==</span> <span class="st">&quot;w&quot;</span>):</span>
<span id="cb6-22"><a href="#cb6-22"></a>        <span class="bu">print</span>(<span class="st">&quot;↑&quot;</span>)</span>
<span id="cb6-23"><a href="#cb6-23"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;a&quot;</span>):</span>
<span id="cb6-24"><a href="#cb6-24"></a>        <span class="bu">print</span>(<span class="st">&quot;←&quot;</span>)</span>
<span id="cb6-25"><a href="#cb6-25"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;s&quot;</span>):</span>
<span id="cb6-26"><a href="#cb6-26"></a>        <span class="bu">print</span>(<span class="st">&quot;↓&quot;</span>)</span>
<span id="cb6-27"><a href="#cb6-27"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;d&quot;</span>):</span>
<span id="cb6-28"><a href="#cb6-28"></a>        <span class="bu">print</span>(<span class="st">&quot;→&quot;</span>)</span>
<span id="cb6-29"><a href="#cb6-29"></a></span>
<span id="cb6-30"><a href="#cb6-30"></a><span class="co"># メインループ</span></span>
<span id="cb6-31"><a href="#cb6-31"></a>root.bind(<span class="st">&quot;&lt;KeyPress&gt;&quot;</span>, on_key_press)</span>
<span id="cb6-32"><a href="#cb6-32"></a>root.mainloop()</span></code></pre></div>
      <ul>
      <li><strong>ChallengeX-1</strong>　wasdだけでなく、矢印キーにも対応させてみましょう。</li>
      </ul>
      <p>ヒント:<span
      class="masked"><code>key == "A" or key == "B"</code>を使えば、「<code>key</code>が<code>A</code>または<code>B</code>のとき」という条件になります。</span></p>
      <hr />
      <p><strong><i class="fa-solid fa-check"></i>解答例</strong></p>
      <p><br><br><br><br></p>
      <div class="sourceCode" id="cb7" data-startFrom="19"
      data-caption="解答"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 18;"><span id="cb7-19"><a href="#cb7-19"></a><span class="co"># 押されたキーを出力する</span></span>
<span id="cb7-20"><a href="#cb7-20"></a><span class="kw">def</span> on_key_press(event):</span>
<span id="cb7-21"><a href="#cb7-21"></a>    key <span class="op">=</span> event.keysym <span class="co"># 変数keyに「w」や「a」など、押したキーの名前が格納される</span></span>
<span id="cb7-22"><a href="#cb7-22"></a>    <span class="cf">if</span>(key <span class="op">==</span> <span class="st">&quot;w&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Up&quot;</span>):</span>
<span id="cb7-23"><a href="#cb7-23"></a>        <span class="bu">print</span>(<span class="st">&quot;↑&quot;</span>)</span>
<span id="cb7-24"><a href="#cb7-24"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;a&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Left&quot;</span>):</span>
<span id="cb7-25"><a href="#cb7-25"></a>        <span class="bu">print</span>(<span class="st">&quot;←&quot;</span>)</span>
<span id="cb7-26"><a href="#cb7-26"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;s&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Down&quot;</span>):</span>
<span id="cb7-27"><a href="#cb7-27"></a>        <span class="bu">print</span>(<span class="st">&quot;↓&quot;</span>)</span>
<span id="cb7-28"><a href="#cb7-28"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;d&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Right&quot;</span>):</span>
<span id="cb7-29"><a href="#cb7-29"></a>        <span class="bu">print</span>(<span class="st">&quot;→&quot;</span>)</span></code></pre></div>
      <p><br></p>
      <hr />
      <p></br></p>
      <h1 data-number="4" id="判定をもとに図形を移動させる"><span
      class="header-section-number">4</span>
      判定をもとに図形を移動させる</h1>
      <p>図形を一度消して、少し移動させ再描写することで、動いているように見せることができます。</p>
      <figure>
      <img src="figs/sub/move-rect.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <div class="sourceCode" id="cb8" data-caption="move-rect.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="im">import</span> tkinter <span class="im">as</span> tk</span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="im">import</span> os</span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co"># ディレクトリ</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>cwd <span class="op">=</span> os.getcwd()</span>
<span id="cb8-6"><a href="#cb8-6"></a></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co"># ウィンドウ設置</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>root <span class="op">=</span> tk.Tk()</span>
<span id="cb8-9"><a href="#cb8-9"></a>root.title(<span class="st">&quot;move-rect&quot;</span>)</span>
<span id="cb8-10"><a href="#cb8-10"></a>root.geometry(<span class="st">&quot;600x300&quot;</span>)</span>
<span id="cb8-11"><a href="#cb8-11"></a></span>
<span id="cb8-12"><a href="#cb8-12"></a><span class="co"># キャンバス設置</span></span>
<span id="cb8-13"><a href="#cb8-13"></a>canvas <span class="op">=</span> tk.Canvas(root,width <span class="op">=</span> <span class="dv">600</span>,height <span class="op">=</span> <span class="dv">300</span>,bg <span class="op">=</span> <span class="st">&quot;skyblue&quot;</span>)</span>
<span id="cb8-14"><a href="#cb8-14"></a>canvas.pack()</span>
<span id="cb8-15"><a href="#cb8-15"></a></span>
<span id="cb8-16"><a href="#cb8-16"></a><span class="co"># 四角形を配置</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>canvas.create_rectangle(<span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">60</span>,<span class="dv">60</span>,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span>
<span id="cb8-18"><a href="#cb8-18"></a></span>
<span id="cb8-19"><a href="#cb8-19"></a><span class="kw">def</span> on_key_press(event):</span>
<span id="cb8-20"><a href="#cb8-20"></a>    <span class="kw">global</span> x,y</span>
<span id="cb8-21"><a href="#cb8-21"></a>    key <span class="op">=</span> event.keysym <span class="co"># 変数keyに「w」や「a」など、押したキーの名前が格納される</span></span>
<span id="cb8-22"><a href="#cb8-22"></a>    <span class="cf">if</span>(key <span class="op">==</span> <span class="st">&quot;w&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Up&quot;</span>):</span>
<span id="cb8-23"><a href="#cb8-23"></a>        <span class="bu">print</span>(<span class="st">&quot;↑&quot;</span>)</span>
<span id="cb8-24"><a href="#cb8-24"></a>        y <span class="op">=</span> y <span class="op">-</span> <span class="dv">5</span></span>
<span id="cb8-25"><a href="#cb8-25"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;a&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Left&quot;</span>):</span>
<span id="cb8-26"><a href="#cb8-26"></a>        x <span class="op">=</span> x <span class="op">-</span> <span class="dv">5</span></span>
<span id="cb8-27"><a href="#cb8-27"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;s&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Down&quot;</span>):</span>
<span id="cb8-28"><a href="#cb8-28"></a>        <span class="bu">print</span>(<span class="st">&quot;↓&quot;</span>)</span>
<span id="cb8-29"><a href="#cb8-29"></a>        y <span class="op">=</span> y <span class="op">+</span> <span class="dv">5</span></span>
<span id="cb8-30"><a href="#cb8-30"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;d&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Right&quot;</span>):</span>
<span id="cb8-31"><a href="#cb8-31"></a>        <span class="bu">print</span>(<span class="st">&quot;→&quot;</span>)</span>
<span id="cb8-32"><a href="#cb8-32"></a>        x <span class="op">=</span> x <span class="op">+</span> <span class="dv">5</span></span>
<span id="cb8-33"><a href="#cb8-33"></a>    </span>
<span id="cb8-34"><a href="#cb8-34"></a>    canvas.delete(<span class="st">&quot;rect&quot;</span>)</span>
<span id="cb8-35"><a href="#cb8-35"></a>    canvas.create_rectangle(x,y,x <span class="op">+</span> <span class="dv">50</span>,y <span class="op">+</span> <span class="dv">50</span>,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span>
<span id="cb8-36"><a href="#cb8-36"></a></span>
<span id="cb8-37"><a href="#cb8-37"></a><span class="co"># メインループ</span></span>
<span id="cb8-38"><a href="#cb8-38"></a>root.bind(<span class="st">&quot;&lt;KeyPress&gt;&quot;</span>, on_key_press)</span>
<span id="cb8-39"><a href="#cb8-39"></a>root.mainloop()</span></code></pre></div>
      <!-- ---------------------------------------- -->
    </main>

    <footer class="markdown-body">
      <p><a href="https://k-768.github.io/PythonGameProgramming/">講義資料のIndexに移動</a></p>
    </footer>

    <script>
      window.onload = function () {
        // ナビゲーション関連
        let openBtn = document.getElementsByClassName("openbtn")[0];
        let navPnl = document.getElementById("g-nav");
        openBtn.onclick = () => {
          openBtn.classList.toggle("active");
          navPnl.classList.toggle("panelactive");
        };

        let items = navPnl.getElementsByTagName("a");
        Array.from(items).forEach((item) => {
          item.onclick = () => {
            openBtn.classList.toggle("active");
            navPnl.classList.toggle("panelactive");
          };
        });

        // マスク処理
        let maskedSpans = document.getElementsByClassName("masked");
        Array.from(maskedSpans).forEach((span) => {
          span.onclick = () => {
            span.classList.toggle("open");
          };
        });

        // data-startfrom 属性の行番号カウンタのリセット
        document.querySelectorAll("div.sourceCode").forEach(function (div) {
          var startFrom = div.getAttribute("data-startfrom");
          if (startFrom != null) {
            div.style.counterReset = "pg-line " + (startFrom - 1);
          }
        });

        // 画像にリンクを付与
        // let images = document.querySelectorAll("figure img");
        // Array.from(images).forEach((img) => {
        //   img.onclick = () => {
        //     location.href = img.getAttribute("src");
        //   };
        // });
      };
    </script>
  </body>
</html>
