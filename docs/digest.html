<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="robots" content="noindex,nofollow,noarchive" />

    <script>
      MathJax = {
        chtml: {
          displayAlign: "left",
          displayIndent: "1em",
        },
      };
    </script>

    

    <link rel="icon" href="favicon2.ico" sizes="any" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c"
    />
    <link rel="stylesheet" href="style.css" />

    <title>Pythonで釣りゲームを作ろう プロトタイプ版</title>
  </head>

  <body>
    <div class="openbtn"><span></span><span></span><span></span></div>
    <nav id="g-nav">
      <div id="g-nav-list">
        <!-- ---------------------------------------- -->
         <ul>
<li><a href="#今回の趣旨について" id="toc-今回の趣旨について"><span
class="toc-section-number">1</span> 今回の趣旨について</a></li>
<li><a href="#はじめに" id="toc-はじめに"><span
class="toc-section-number">2</span> はじめに</a></li>
<li><a href="#もくじ" id="toc-もくじ"><span
class="toc-section-number">3</span> もくじ</a></li>
<li><a href="#環境構築" id="toc-環境構築"><span
class="toc-section-number">4</span> 環境構築</a></li>
<li><a href="#キーボードでキャラクターを操作"
id="toc-キーボードでキャラクターを操作"><span
class="toc-section-number">5</span> キーボードでキャラクターを操作</a>
<ul>
<li><a href="#まずはサンプルを触ってみる"
id="toc-まずはサンプルを触ってみる"><span
class="toc-section-number">5.1</span>
まずはサンプルを触ってみる</a></li>
<li><a href="#ウィンドウのタイトルを変更する"
id="toc-ウィンドウのタイトルを変更する"><span
class="toc-section-number">5.2</span>
ウィンドウのタイトルを変更する</a></li>
<li><a href="#ウィンドウの大きさを変更する"
id="toc-ウィンドウの大きさを変更する"><span
class="toc-section-number">5.3</span>
ウィンドウの大きさを変更する</a></li>
<li><a href="#キャンバスを変更する" id="toc-キャンバスを変更する"><span
class="toc-section-number">5.4</span> キャンバスを変更する</a></li>
<li><a href="#四角形を配置する" id="toc-四角形を配置する"><span
class="toc-section-number">5.5</span> 四角形を配置する</a></li>
<li><a href="#キーボードが押されたときの処理を設定する"
id="toc-キーボードが押されたときの処理を設定する"><span
class="toc-section-number">5.6</span>
キーボードが押されたときの処理を設定する</a></li>
<li><a href="#キーボードが押されたか判定する"
id="toc-キーボードが押されたか判定する"><span
class="toc-section-number">5.7</span>
キーボードが押されたか判定する</a></li>
<li><a href="#まとめ" id="toc-まとめ"><span
class="toc-section-number">5.8</span> まとめ</a></li>
</ul></li>
<li><a href="#変数とは" id="toc-変数とは"><span
class="toc-section-number">6</span> 変数とは</a></li>
<li><a href="#変数の値を変更する" id="toc-変数の値を変更する"><span
class="toc-section-number">7</span> 変数の値を変更する</a></li>
<li><a href="#変数の命名規則" id="toc-変数の命名規則"><span
class="toc-section-number">8</span> 変数の命名規則</a>
<ul>
<li><a href="#半角のアルファベット数字_アンダースコアを組み合わせる"
id="toc-半角のアルファベット数字_アンダースコアを組み合わせる"><span
class="toc-section-number">8.1</span>
半角のアルファベット、数字、<code>_</code>(アンダースコア)を組み合わせる</a></li>
<li><a href="#最初の文字には数字を使わない"
id="toc-最初の文字には数字を使わない"><span
class="toc-section-number">8.2</span>
最初の文字には数字を使わない</a></li>
<li><a href="#予約語を使わない" id="toc-予約語を使わない"><span
class="toc-section-number">8.3</span> 予約語を使わない</a></li>
</ul></li>
<li><a href="#乱数" id="toc-乱数"><span
class="toc-section-number">9</span> 乱数</a>
<ul>
<li><a href="#random.randint" id="toc-random.randint"><span
class="toc-section-number">9.1</span> random.randint()</a></li>
<li><a href="#random.choice" id="toc-random.choice"><span
class="toc-section-number">9.2</span> random.choice()</a></li>
<li><a href="#random.choices" id="toc-random.choices"><span
class="toc-section-number">9.3</span> random.choices()</a></li>
<li><a href="#応用" id="toc-応用"><span
class="toc-section-number">9.4</span> 応用</a></li>
</ul></li>
</ul> 
        <!-- ---------------------------------------- -->
      </div>
    </nav>

    <header class="markdown-body">
      <p>Pythonで釣りゲームを作ろう プロトタイプ版</p>
      <p>2024年08月29日</p>
    </header>

    <main class="markdown-body">
      <!-- ---------------------------------------- -->
      <h1 data-number="1" id="今回の趣旨について"><span
      class="header-section-number">1</span> 今回の趣旨について</h1>
      <p>私は卒業研究として、「高専1年生を対象としたゲーム作りを通じてPythonプログラミングを学べる教材づくり」を行っております。今回のデモ講座では、教材の方向性の確認や、教材の有効性の検証を目的としております。今日の最後には、アンケートを実施します。ご協力いただきますよう、よろしくお願いします。</p>
      <h1 data-number="2" id="はじめに"><span
      class="header-section-number">2</span> はじめに</h1>
      <p>このオンラインテキストでは、<strong>ゲームづくりを通じて、Pythonプログラミングを学ぶことができます</strong>。
      本来は<strong>90分x8回</strong>の講義で、テキストを進めると<strong>最終的にゲームが完成する</strong>形式ですが、今回は短い時間のため、<strong>サンプルを改造しながら、Pythonについて学ぶ</strong>形式になっています。</p>
      <h1 data-number="3" id="もくじ"><span
      class="header-section-number">3</span> もくじ</h1>
      <ul>
      <li><a href="digest.html#環境構築">環境構築</a></li>
      <li><a
      href="digest.html#キーボードでキャラクターを操作">キーボードでキャラクターを操作</a></li>
      <li><a href="digest.html#変数とは">変数とは</a></li>
      <li><a
      href="digest.html#ガチャを作ろう！">ガチャを作ろう！</a></li>
      </ul>
      <h1 data-number="4" id="環境構築"><span
      class="header-section-number">4</span> 環境構築</h1>
      <p>Pythonでプログラミングをするためには、環境の構築が必要です。レポートを書くためにWordやGoogleDocumentといったテキストエディタが必要であるのと同じように、<strong>プログラミングにはソースコードエディタが必要</strong>です。今回は、<strong>Visual
      Studio
      Code</strong>(VSCode)とよばれるソースコードエディタを用います。</p>
      <p><a
      href="https://gammasoft.jp/blog/how-to-start-visual-studio-code-for-python/">このページ</a>に従って、環境構築を行ってください。</p>
      <p><br></p>
      <h1 data-number="5" id="キーボードでキャラクターを操作"><span
      class="header-section-number">5</span>
      キーボードでキャラクターを操作</h1>
      <h2 data-number="5.1" id="まずはサンプルを触ってみる"><span
      class="header-section-number">5.1</span>
      まずはサンプルを触ってみる</h2>
      <p><code>move-rect.py</code>を新規作成し、以下のプログラムをコピー＆ペーストして実行してみてください。すると、画像のような画面が表示されると思います。</p>
      <figure>
      <img src="figs/sub/move-rect.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><strong>矢印キーもしくはWASDで操作</strong>できます。押してみて、四角形が移動することを確認してください。</p>
      <div class="sourceCode" id="cb1" data-caption="move-rect.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> tkinter <span class="im">as</span> tk</span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># ウィンドウ設置</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>root <span class="op">=</span> tk.Tk()</span>
<span id="cb1-5"><a href="#cb1-5"></a>root.title(<span class="st">&quot;move-rect&quot;</span>)</span>
<span id="cb1-6"><a href="#cb1-6"></a>root.geometry(<span class="st">&quot;600x300&quot;</span>)</span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co"># キャンバス設置</span></span>
<span id="cb1-9"><a href="#cb1-9"></a>canvas <span class="op">=</span> tk.Canvas(root,width <span class="op">=</span> <span class="dv">600</span>,height <span class="op">=</span> <span class="dv">300</span>,bg <span class="op">=</span> <span class="st">&quot;skyblue&quot;</span>)</span>
<span id="cb1-10"><a href="#cb1-10"></a>canvas.pack()</span>
<span id="cb1-11"><a href="#cb1-11"></a></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="co"># 四角形を配置</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>rect_size <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>y <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>canvas.create_rectangle(x,y,x<span class="op">+</span>rect_size,y<span class="op">+</span>rect_size,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="co"># 何かのキーが押されたときに実行される関数</span></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="kw">def</span> on_key_press(event):</span>
<span id="cb1-20"><a href="#cb1-20"></a>    <span class="kw">global</span> x,y</span>
<span id="cb1-21"><a href="#cb1-21"></a>    speed <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb1-22"><a href="#cb1-22"></a>    key <span class="op">=</span> event.keysym <span class="co"># 変数keyに「w」や「a」など、押したキーの名前が格納される</span></span>
<span id="cb1-23"><a href="#cb1-23"></a>    <span class="cf">if</span>(key <span class="op">==</span> <span class="st">&quot;w&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Up&quot;</span>):</span>
<span id="cb1-24"><a href="#cb1-24"></a>        <span class="bu">print</span>(<span class="st">&quot;↑&quot;</span>)</span>
<span id="cb1-25"><a href="#cb1-25"></a>        y <span class="op">=</span> y <span class="op">-</span> speed</span>
<span id="cb1-26"><a href="#cb1-26"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;a&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Left&quot;</span>):</span>
<span id="cb1-27"><a href="#cb1-27"></a>        <span class="bu">print</span>(<span class="st">&quot;←&quot;</span>)</span>
<span id="cb1-28"><a href="#cb1-28"></a>        x <span class="op">=</span> x <span class="op">-</span> speed</span>
<span id="cb1-29"><a href="#cb1-29"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;s&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Down&quot;</span>):</span>
<span id="cb1-30"><a href="#cb1-30"></a>        <span class="bu">print</span>(<span class="st">&quot;↓&quot;</span>)</span>
<span id="cb1-31"><a href="#cb1-31"></a>        y <span class="op">=</span> y <span class="op">+</span> speed</span>
<span id="cb1-32"><a href="#cb1-32"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;d&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Right&quot;</span>):</span>
<span id="cb1-33"><a href="#cb1-33"></a>        <span class="bu">print</span>(<span class="st">&quot;→&quot;</span>)</span>
<span id="cb1-34"><a href="#cb1-34"></a>        x <span class="op">=</span> x <span class="op">+</span> speed</span>
<span id="cb1-35"><a href="#cb1-35"></a>    </span>
<span id="cb1-36"><a href="#cb1-36"></a>    canvas.delete(<span class="st">&quot;rect&quot;</span>)</span>
<span id="cb1-37"><a href="#cb1-37"></a>    canvas.create_rectangle(x,y,x<span class="op">+</span>rect_size,y<span class="op">+</span>rect_size,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span>
<span id="cb1-38"><a href="#cb1-38"></a></span>
<span id="cb1-39"><a href="#cb1-39"></a><span class="co"># メインループ</span></span>
<span id="cb1-40"><a href="#cb1-40"></a>root.bind(<span class="st">&quot;&lt;KeyPress&gt;&quot;</span>, on_key_press)</span>
<span id="cb1-41"><a href="#cb1-41"></a>root.mainloop()</span></code></pre></div>
      <p><strong>ウィンドウの×ボタンを押すとプログラムが終了します。</strong>
      <br></p>
      <h2 data-number="5.2" id="ウィンドウのタイトルを変更する"><span
      class="header-section-number">5.2</span>
      ウィンドウのタイトルを変更する</h2>
      <p><code>3行目</code>の<code>root.title("move-rect")</code>でウィンドウのタイトルを<strong>move-rect</strong>に設定しています。試しに、<code>"test"</code>に変更してみてください。</p>
      <div class="sourceCode" id="cb2" data-startFrom="3"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 2;"><span id="cb2-3"><a href="#cb2-3"></a><span class="co"># ウィンドウ設置</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>root <span class="op">=</span> tk.Tk()</span>
<span id="cb2-5"><a href="#cb2-5"></a>root.title(<span class="st">&quot;test&quot;</span>)　<span class="op">&lt;-</span>ここを変更</span>
<span id="cb2-6"><a href="#cb2-6"></a>root.geometry(<span class="st">&quot;400x600&quot;</span>) </span></code></pre></div>
      <p>プログラムを実行して、タイトルが変わっていることを確認してください。</p>
      <p><br></p>
      <h2 data-number="5.3" id="ウィンドウの大きさを変更する"><span
      class="header-section-number">5.3</span>
      ウィンドウの大きさを変更する</h2>
      <p><code>6行目</code>の<code>"600x300"</code>の部分で、<strong>表示するウィンドウのサイズを指定</strong>しています。試しに、<code>"600x300"</code>を<code>"400x600"</code>に変更してみてください。</p>
      <div class="sourceCode" id="cb3" data-startFrom="3"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 2;"><span id="cb3-3"><a href="#cb3-3"></a><span class="co"># ウィンドウ設置</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>root <span class="op">=</span> tk.Tk()</span>
<span id="cb3-5"><a href="#cb3-5"></a>root.title(<span class="st">&quot;move-rect&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6"></a>root.geometry(<span class="st">&quot;400x600&quot;</span>) <span class="op">&lt;-</span>ここを変更</span></code></pre></div>
      <p>実行すると、ウィンドウが縦長に変わります。このように、ウィンドウのサイズを<code>"幅x高さ"</code>で指定できます。<code>600</code>や<code>400</code>といった数字は<strong>ピクセル数</strong>を表しています。</p>
      <figure>
      <img src="figs/digest/400x600.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><br></p>
      <div class="note type-tips">
      <p><strong>ディスプレイの解像度を調べる</strong></p>
      <p>モニターのピクセル数は設定から調べることができます。</p>
      <p><strong>設定　＞　システム　＞　ディスプレイ　＞　ディスプレイの詳細設定</strong></p>
      <figure>
      <img src="figs/digest/ディスプレイサイズ.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>この場合、<code>1920x1080</code>がディスプレイ全体のサイズになります。</p>
      </div>
      <p><br></p>
      <ul>
      <li><strong>Challenge</strong>　ディスプレイの解像度を参考にして、ウィンドウが<strong>画面に大きく表示されるように</strong>、適当なサイズに変更してください。</li>
      </ul>
      <p><br></p>
      <h2 data-number="5.4" id="キャンバスを変更する"><span
      class="header-section-number">5.4</span> キャンバスを変更する</h2>
      <p>キャンバスは、<strong>図形や画像を設置するために必要な下地</strong>です。</p>
      <p><code>10行目</code>ではキャンバスの大きさや色を指定しています。
      <code>width</code>が<strong>幅</strong>、<code>height</code>が<strong>高さ</strong>、<code>bg</code>が<strong>背景色</strong>に対応しています。
      幅と高さを<strong>上で設定したウィンドウと同じ数値に変更</strong>してみてください。</p>
      <div class="sourceCode" id="cb4" data-startFrom="9"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 8;"><span id="cb4-9"><a href="#cb4-9"></a><span class="co"># キャンバス設置</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>canvas <span class="op">=</span> tk.Canvas(root,width <span class="op">=</span> xxx,height <span class="op">=</span> yyy,bg <span class="op">=</span> <span class="st">&quot;skyblue&quot;</span>) <span class="op">&lt;-</span>ここを変更</span>
<span id="cb4-11"><a href="#cb4-11"></a>canvas.pack()</span></code></pre></div>
      <p>以下の画像を参考に、色も変更してみましょう。<code>skyblue</code>を好きな色の名前に書き換えることで変更できます。</p>
      <figure>
      <img src="figs/digest/color.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <blockquote>
      <p>出典:
      https://stackoverflow.com/questions/4969543/colour-chart-for-tkinter-and-tix-using-python</p>
      </blockquote>
      <p>例えば<code>orange</code>に変更することで、<strong>背景色がオレンジ</strong>になります。</p>
      <div class="sourceCode" id="cb5" data-startFrom="9"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 8;"><span id="cb5-9"><a href="#cb5-9"></a><span class="co"># キャンバス設置</span></span>
<span id="cb5-10"><a href="#cb5-10"></a>canvas <span class="op">=</span> tk.Canvas(root,width <span class="op">=</span> <span class="dv">800</span>,height <span class="op">=</span> <span class="dv">600</span>,bg <span class="op">=</span> <span class="st">&quot;orange&quot;</span>) <span class="op">&lt;-</span>ここを変更</span>
<span id="cb5-11"><a href="#cb5-11"></a>canvas.pack()</span></code></pre></div>
      <figure>
      <img src="figs/digest/orange.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><br></p>
      <h2 data-number="5.5" id="四角形を配置する"><span
      class="header-section-number">5.5</span> 四角形を配置する</h2>
      <p>以下の部分で、用意したキャンバスに四角形を配置しています。</p>
      <p><code>14行目</code>の<code>rect_size = 50</code>で四角形の大きさを設定しています。試しに<code>100</code>に変更して、四角形が大きくなることを確認してください。</p>
      <div class="sourceCode" id="cb6" data-startFrom="13"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 12;"><span id="cb6-13"><a href="#cb6-13"></a><span class="co"># 四角形を配置</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>rect_size <span class="op">=</span> <span class="dv">100</span> <span class="op">&lt;-</span>ここを変更</span>
<span id="cb6-15"><a href="#cb6-15"></a>x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb6-16"><a href="#cb6-16"></a>y <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb6-17"><a href="#cb6-17"></a>canvas.create_rectangle(x,y,x<span class="op">+</span>rect_size,y<span class="op">+</span>rect_size,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span></code></pre></div>
      <p><code>15～16行目</code>の<code>x = 10</code>、<code>y = 10</code>の部分で、四角形の左上の角の座標を指定しています。数字を変更することで、四角形の初期位置を変更できます。</p>
      <p>ただし、プログラミングで用いられる座標軸は、<strong>数学で用いられるものと向きが違う</strong>ので<strong>注意が必要です</strong>。</p>
      <figure>
      <img src="figs/digest/座標系.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>モニターの<strong>左上が原点</strong>で、<strong>Y軸が反転</strong>しています。</p>
      <p><strong>xやyの値を変えて、それぞれが四角形の位置にどのように対応しているか確認してください</strong>。</p>
      <div class="sourceCode" id="cb7" data-startFrom="13"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 12;"><span id="cb7-13"><a href="#cb7-13"></a><span class="co"># 四角形を配置</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>rect_size <span class="op">=</span> <span class="dv">100</span> </span>
<span id="cb7-15"><a href="#cb7-15"></a>x <span class="op">=</span> <span class="dv">10</span>　<span class="op">&lt;-</span>ここを変更</span>
<span id="cb7-16"><a href="#cb7-16"></a>y <span class="op">=</span> <span class="dv">10</span> <span class="op">&lt;-</span>ここを変更</span>
<span id="cb7-17"><a href="#cb7-17"></a>canvas.create_rectangle(x,y,x<span class="op">+</span>rect_size,y<span class="op">+</span>rect_size,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span></code></pre></div>
      <div class="note type-tips">
      <p><strong>このプログラムのしくみ</strong></p>
      <p><code>14行目</code>から<code>16行目</code>
      では<strong>変数</strong>というものを使用しています。</p>
      <div class="sourceCode" id="cb8" data-startFrom="13"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 12;"><span id="cb8-13"><a href="#cb8-13"></a><span class="co"># 四角形を配置</span></span>
<span id="cb8-14"><a href="#cb8-14"></a>rect_size <span class="op">=</span> <span class="dv">50</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>x <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb8-16"><a href="#cb8-16"></a>y <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>canvas.create_rectangle(x,y,x<span class="op">+</span>rect_size,y<span class="op">+</span>rect_size,fill<span class="op">=</span><span class="st">&quot;blue&quot;</span>,tag<span class="op">=</span><span class="st">&quot;rect&quot;</span>)</span></code></pre></div>
      <p><code>14行目</code>の<code>rect_size = 50</code>は、<strong>「今後<code>rect_size</code>という名前が出てきたらそれを50と読み替えてください」</strong>という意味です。</p>
      <p><a href="digest.html#変数とは">変数</a>
      については後ほど<strong>詳しく解説します</strong>。</p>
      <p>そして、<code>canvas.create_rectangle</code>という命令で四角形を配置しています。
      以下のように四角形の<strong>左上と右下の座標</strong>、<strong>色</strong>、<strong>名前</strong>を指定しています。</p>
      <figure>
      <img src="figs/digest/create_rectangle.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      </div>
      <p><br></p>
      <h2 data-number="5.6"
      id="キーボードが押されたときの処理を設定する"><span
      class="header-section-number">5.6</span>
      キーボードが押されたときの処理を設定する</h2>
      <p><code>19行目</code>からはキーボードが押されたときの処理が記述されています。</p>
      <p><code>22行目</code>の<code>speed = 10</code>で四角形が移動する速度を設定しています。
      数値を変更して、<strong>移動速度が変わることを確認</strong>してください。</p>
      <div class="sourceCode" id="cb9" data-startFrom="19"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 18;"><span id="cb9-19"><a href="#cb9-19"></a><span class="co"># 何かのキーが押されたときに実行される関数</span></span>
<span id="cb9-20"><a href="#cb9-20"></a><span class="kw">def</span> on_key_press(event):</span>
<span id="cb9-21"><a href="#cb9-21"></a>    <span class="kw">global</span> x,y</span>
<span id="cb9-22"><a href="#cb9-22"></a>    speed <span class="op">=</span> <span class="dv">10</span> <span class="op">&lt;-</span>ここを変更</span>
<span id="cb9-23"><a href="#cb9-23"></a>    key <span class="op">=</span> event.keysym <span class="co"># 変数keyに「w」や「a」など、押したキーの名前が格納される</span></span></code></pre></div>
      <p><br></p>
      <h2 data-number="5.7" id="キーボードが押されたか判定する"><span
      class="header-section-number">5.7</span>
      キーボードが押されたか判定する</h2>
      <p><code>23行目</code>の<code>key = event.keysym</code>では、変数keyに「w」や「a」など、押したキーの名前を代入しています。</p>
      <p><code>24行目</code>からは<code>if文</code>と呼ばれる、<strong>条件分岐</strong>をおこなう部分です。後に詳しく解説するので、今は飛ばしてOKです。</p>
      <div class="sourceCode" id="cb10" data-startFrom="23"
      data-caption="move-rect.py(抜粋)"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python" style="counter-reset: source-line 22;"><span id="cb10-23"><a href="#cb10-23"></a>    key <span class="op">=</span> event.keysym <span class="co"># 変数keyに「w」や「a」など、押したキーの名前が格納される</span></span>
<span id="cb10-24"><a href="#cb10-24"></a>    <span class="cf">if</span>(key <span class="op">==</span> <span class="st">&quot;w&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Up&quot;</span>):</span>
<span id="cb10-25"><a href="#cb10-25"></a>        <span class="bu">print</span>(<span class="st">&quot;↑&quot;</span>)</span>
<span id="cb10-26"><a href="#cb10-26"></a>        y <span class="op">=</span> y <span class="op">-</span> speed</span>
<span id="cb10-27"><a href="#cb10-27"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;a&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Left&quot;</span>):</span>
<span id="cb10-28"><a href="#cb10-28"></a>        <span class="bu">print</span>(<span class="st">&quot;←&quot;</span>)</span>
<span id="cb10-29"><a href="#cb10-29"></a>        x <span class="op">=</span> x <span class="op">-</span> speed</span>
<span id="cb10-30"><a href="#cb10-30"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;s&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Down&quot;</span>):</span>
<span id="cb10-31"><a href="#cb10-31"></a>        <span class="bu">print</span>(<span class="st">&quot;↓&quot;</span>)</span>
<span id="cb10-32"><a href="#cb10-32"></a>        y <span class="op">=</span> y <span class="op">+</span> speed</span>
<span id="cb10-33"><a href="#cb10-33"></a>    <span class="cf">elif</span>(key <span class="op">==</span> <span class="st">&quot;d&quot;</span> <span class="kw">or</span> key <span class="op">==</span> <span class="st">&quot;Right&quot;</span>):</span>
<span id="cb10-34"><a href="#cb10-34"></a>        <span class="bu">print</span>(<span class="st">&quot;→&quot;</span>)</span>
<span id="cb10-35"><a href="#cb10-35"></a>        x <span class="op">=</span> x <span class="op">+</span> speed</span></code></pre></div>
      <p><br></p>
      <h2 data-number="5.8" id="まとめ"><span
      class="header-section-number">5.8</span> まとめ</h2>
      <p>ここまでキーボードで四角形を操作するプログラムの簡単な説明を行いました。
      このようにプログラムでは、<strong>1つ1つの命令を組み合わせて</strong>複雑な動作を実現しています。
      自分でプログラムを書くためには、この<strong>1つ1つの命令文を知る</strong>ことが大事になります。今回は、特に基本となる命令について学びましょう。</p>
      <hr />
      <p><br></p>
      <h1 data-number="6" id="変数とは"><span
      class="header-section-number">6</span> 変数とは</h1>
      <figure>
      <img src="figs/03/var.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>変数とは、<strong>データを入れておく箱</strong>のようなもので、箱の中身は<strong>いつでも確認したり変更することができます</strong>。
      変数<code>a</code>に値<code>10</code>を入れるときは、以下のように書きます。</p>
      <div class="sourceCode" id="cb11"><pre
      class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">10</span></span></code></pre></div>
      <p>この変数に値を入れる<code>=</code>は、<strong>代入演算子</strong>と呼ばれます。</p>
      <p></br></p>
      <hr />
      <p>変数に入れた値は、<strong>簡単に</strong>取り出すことができます。print文の<code>()</code>の中に変数名を記述するだけです。新しいファイル<code>test3-1.py</code>を作成してください。（方法は<a
      href="https://gammasoft.jp/blog/how-to-start-visual-studio-code-for-python/">環境構築で参考にしたページ</a>の最後の方を確認してください。）</p>
      <div class="sourceCode" id="cb12" data-caption="test3-1.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1"></a>a <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="bu">print</span>(a)</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>10</code></pre>
      <p>1行目で変数<code>a</code>に10を代入しています。そのため、2行目のprint文の<code>()</code>の中の<code>a</code>は10と読み替えられました。</p>
      <br>
      <div class="note type-tips">
      <p><strong>「=」の使い方に注意!!</strong></p>
      <p>代入演算子<code>=</code>は、<strong>数学で使うものとは意味が異なり、左の変数に右の値を代入するはたらき</strong>を持ちます。
      そのため、以下のプログラムを実行するとエラーが起きます。</p>
      <div class="sourceCode" id="cb14" data-caption="test.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1"></a><span class="dv">10</span> <span class="op">=</span> a</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="bu">print</span>(a)</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>PS C:\******&gt; &amp; C:/******/python.exe c:/******/test.py
  File &quot;c:\******\test.py&quot;, line 1
    10 = a
    ^^
SyntaxError: cannot assign to literal here. Maybe you meant &#39;==&#39; instead of &#39;=&#39;?</code></pre>
      <p>「<code>10</code>は<strong>変数ではないので代入できません</strong>」と言われてしまいます。</p>
      </div>
      <hr />
      <h1 data-number="7" id="変数の値を変更する"><span
      class="header-section-number">7</span> 変数の値を変更する</h1>
      <p>変数に代入し直せば、変数の値を変更することができます。</p>
      <div class="sourceCode" id="cb16" data-caption="test3-3.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1"></a>a <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="bu">print</span>(a)</span>
<span id="cb16-3"><a href="#cb16-3"></a>a <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="bu">print</span>(a)</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>10
20</code></pre>
      <p><br></p>
      <hr />
      <p><strong>四則演算は以下のようにして表記します</strong></p>
      <div class="sourceCode" id="cb18" data-caption="四則演算"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1"></a>a <span class="op">=</span> <span class="dv">1</span> <span class="op">+</span> <span class="dv">2</span> <span class="co">#足し算</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>b <span class="op">=</span> <span class="dv">2</span> <span class="op">-</span> <span class="dv">1</span> <span class="co">#引き算</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>c <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> <span class="dv">2</span> <span class="co">#掛け算</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>d <span class="op">=</span> <span class="dv">4</span> <span class="op">/</span> <span class="dv">2</span> <span class="co">#割り算</span></span></code></pre></div>
      <p>掛け算には<code>*</code>(アスタリスク)を、割り算には<code>/</code>(スラッシュ)を用いるのが数学とは異なる点です。</p>
      <hr />
      <p><strong><code>a = a + 2</code>と書けば、<code>a</code>の値を2だけ増やすことができます</strong>。</p>
      <div class="sourceCode" id="cb19" data-caption="test3-4.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1"></a>a <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="bu">print</span>(a)</span>
<span id="cb19-3"><a href="#cb19-3"></a>a <span class="op">=</span> a <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="bu">print</span>(a)</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>10
12</code></pre>
      <hr />
      <ul>
      <li><strong>Challenge1</strong>　上のプログラムの1行目を書き換えて、<code>a</code>の値を<code>123</code>に変更しましょう。</li>
      <li><strong>Challenge2</strong>　3行目を書き換えて、<code>a</code>の値を<strong>2倍</strong>にするよう変更しましょう。</li>
      </ul>
      <p><strong><i class="fa-solid fa-check"></i>解答</strong></p>
      <p>Challenge1: <span
      class="masked"><code>a = 123</code></span></p>
      <p>Challenge2: <span
      class="masked"><code>a = a * 2</code></span></p>
      <p></br></p>
      <hr />
      <h1 data-number="8" id="変数の命名規則"><span
      class="header-section-number">8</span> 変数の命名規則</h1>
      <p>変数名のつけ方には以下の決まりがあります。</p>
      <h2 data-number="8.1"
      id="半角のアルファベット数字_アンダースコアを組み合わせる"><span
      class="header-section-number">8.1</span>
      半角のアルファベット、数字、<code>_</code>(アンダースコア)を組み合わせる</h2>
      <p>日本語やその他の記号は使わないようにしましょう。</p>
      <div class="sourceCode" id="cb21" data-caption="⭕良い例"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1"></a>a <span class="op">=</span> <span class="dv">10</span></span></code></pre></div>
      <div class="sourceCode" id="cb22" data-caption="❌悪い例"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1"></a>ｓｃｏｒｅ <span class="op">=</span> <span class="dv">99</span>    <span class="op">&lt;-</span>全角</span>
<span id="cb22-2"><a href="#cb22-2"></a>スコア <span class="op">=</span> <span class="dv">99</span>    <span class="op">&lt;-</span>変数名が日本語</span>
<span id="cb22-3"><a href="#cb22-3"></a>stage2<span class="op">-</span><span class="dv">1</span> <span class="op">=</span> <span class="dv">99</span> <span class="op">&lt;-</span>「<span class="op">-</span>」は引き算の記号として認識される</span></code></pre></div>
      <h2 data-number="8.2" id="最初の文字には数字を使わない"><span
      class="header-section-number">8.2</span>
      最初の文字には数字を使わない</h2>
      <p>2文字目以降は自由に使えます。</p>
      <div class="sourceCode" id="cb23" data-caption="⭕良い例"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1"></a><span class="bu">sum</span> <span class="op">=</span> <span class="dv">7</span></span></code></pre></div>
      <div class="sourceCode" id="cb24" data-caption="❌悪い例"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1"></a><span class="dv">1</span><span class="er">st_sum</span> <span class="op">=</span> <span class="dv">7</span></span></code></pre></div>
      <h2 data-number="8.3" id="予約語を使わない"><span
      class="header-section-number">8.3</span> 予約語を使わない</h2>
      <p>たとえば<code>print</code>のような、Pythonへの命令として決まっている単語をそのまま使うことはできません。</p>
      <div class="sourceCode" id="cb25" data-caption="❌悪い例"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1"></a><span class="bu">print</span> <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb25-2"><a href="#cb25-2"></a><span class="bu">print</span>(<span class="bu">print</span>)</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>PS C:\******&gt; &amp; C:/******/python.exe c:/******/test.py
  File &quot;c:\******\test.py&quot;, line 2, in &lt;module&gt;
    print(print)
TypeError: &#39;int&#39; object is not callable</code></pre>
      <p>1行目でprintに値が上書きされてしまったので、その後ろではprint文が使えなくなってしまいます。</p>
      <hr />
      <h3 data-number="8.3.1"
      id="charenge2-3-次の変数名は適切か判断しましょう"><span
      class="header-section-number">8.3.1</span>
      <strong>charenge2-3</strong>
      次の変数名は適切か判断しましょう。</h3>
      <ul>
      <li><code>tmp</code> ・・・ <span
      class="masked">⭕　　　　　　　　　　　　　　</span></li>
      <li><code>Name</code> ・・・ <span
      class="masked">❌全て小文字にするべきです</span></li>
      <li><code>24th_anniversary</code> ・・・ <span
      class="masked">❌最初の文字は数字ではいけません</span></li>
      <li><code>g20</code> ・・・ <span
      class="masked">⭕　　　　　　　　　　　　　　</span></li>
      <li><code>high-school</code> ・・・ <span
      class="masked">❌<code>-</code>(ハイフン)は引き算として認識されてしまいます</span></li>
      </ul>
      <p><br></p>
      <h1 data-number="9" id="乱数"><span
      class="header-section-number">9</span> 乱数</h1>
      <p><code>random</code>モジュールを用いると、ランダムな数を生成したり、リストからランダムに抽出することができます。</p>
      <h2 data-number="9.1" id="random.randint"><span
      class="header-section-number">9.1</span> random.randint()</h2>
      <figure>
      <img src="figs/05/dice.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><code>random.randint(a,b)</code>を使って<strong>a~b</strong>までの整数を生成します。</p>
      <p>以下のコードを実行してみてください。さいころと同じふるまいをします。
      1行目の<code>import random</code>で、<code>random</code>モジュールを読み込み、使用できるようにしています。</p>
      <div class="sourceCode" id="cb27"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1"></a><span class="im">import</span> random</span>
<span id="cb27-2"><a href="#cb27-2"></a></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="bu">print</span>(random.randint(<span class="dv">1</span>,<span class="dv">6</span>))</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>3</code></pre>
      <p></br></p>
      <hr />
      <ul>
      <li><strong>Challenge1-1</strong>　上のプログラムを改造して、1~50までの乱数を表示するプログラムを作成しましょう。</li>
      <li><strong>Challenge1-2</strong>　さらに改造して、2~100までのランダムな<strong>偶数</strong>を表示するプログラムを作成しましょう。</li>
      </ul>
      <p>ヒント: <span
      class="masked"><code>2から100までの偶数を数学的に書くと</code>2n
      (1 &lt;= n &lt;= 50)<code>となります。</code></span></p>
      <p><strong><i class="fa-solid fa-check"></i>解答</strong></p>
      <p>Challenge1-1: <span
      class="masked"><code>print(random.randint(1,50))</code></span></p>
      <p>Challenge1-2: <span
      class="masked"><code>print(random.randint(1,50) * 2)</code></span></p>
      <p></br></p>
      <h2 data-number="9.2" id="random.choice"><span
      class="header-section-number">9.2</span> random.choice()</h2>
      <p><code>random.choice(list)</code>を使って<code>list</code>からランダムに要素を選択します。</p>
      <p>以下のコードを実行してみてください。魚の名前が入ったリストからランダムに選択して表示します。</p>
      <div class="sourceCode" id="cb29"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1"></a><span class="im">import</span> random</span>
<span id="cb29-2"><a href="#cb29-2"></a></span>
<span id="cb29-3"><a href="#cb29-3"></a>fishes <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>,<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;サメ&quot;</span>]</span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="bu">print</span>(random.choice(fishes))</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>アジ</code></pre>
      <p></br></p>
      <h2 data-number="9.3" id="random.choices"><span
      class="header-section-number">9.3</span> random.choices()</h2>
      <p><code>random.choices(list,k,weights)</code>を使って<code>list</code>からランダムに複数の要素を選択します。</p>
      <p><code>random.choices()</code>で選択された要素は<strong>重複することがあります。</strong>重複させたくない場合は<code>random.sample()</code>が用意されています。</p>
      <p>以下のコードを実行してみてください。魚の名前が入ったリストからランダムに3つ選択して表示します。</p>
      <div class="sourceCode" id="cb31"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="im">import</span> random</span>
<span id="cb31-2"><a href="#cb31-2"></a></span>
<span id="cb31-3"><a href="#cb31-3"></a>fishes <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>,<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;サメ&quot;</span>]</span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="bu">print</span>(random.choices(fishes,k<span class="op">=</span><span class="dv">3</span>))</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>[&#39;タイ&#39;, &#39;イワシ&#39;, &#39;イワシ&#39;]</code></pre>
      <p></br></p>
      <p>さらには重みをつけることもできます。引数<code>weights</code>で確率を指定します。</p>
      <div class="sourceCode" id="cb33"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1"></a><span class="im">import</span> random</span>
<span id="cb33-2"><a href="#cb33-2"></a></span>
<span id="cb33-3"><a href="#cb33-3"></a>fishes <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>,<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;サメ&quot;</span>]</span>
<span id="cb33-4"><a href="#cb33-4"></a>fish_weights <span class="op">=</span>[<span class="dv">30</span>,<span class="dv">30</span>,<span class="dv">30</span>,<span class="dv">8</span>,<span class="dv">2</span>] <span class="co">#アジ,サバ,イワシ30%、タイ8%、サメ2%</span></span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="bu">print</span>(random.choices(fishes,k<span class="op">=</span><span class="dv">10</span>,weights <span class="op">=</span> fish_weights))</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>[&#39;サバ&#39;, &#39;イワシ&#39;, &#39;アジ&#39;, &#39;サメ&#39;, &#39;アジ&#39;, &#39;サバ&#39;, &#39;イワシ&#39;, &#39;アジ&#39;, &#39;イワシ&#39;, &#39;イワシ&#39;]</code></pre>
      <p></br></p>
      <div class="note type-tips">
      <p><strong>配列からランダムな要素を重み付きで取り出す</strong></p>
      <p><code>random.choices()</code>を使えば、<code>random.choice()</code>ではできなかった、重みをつけて要素を取り出す操作ができました。
      では、<strong>魚の名前のリストではなく魚の名前そのものが欲しいとき、どうすれば良い</strong>でしょうか。</p>
      <p>まずは、先ほどのコードを<code>k=1</code>と書き換えて実行してみましょう。</p>
      <div class="sourceCode" id="cb35"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1"></a><span class="im">import</span> random</span>
<span id="cb35-2"><a href="#cb35-2"></a></span>
<span id="cb35-3"><a href="#cb35-3"></a>fishes <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>,<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;サメ&quot;</span>]</span>
<span id="cb35-4"><a href="#cb35-4"></a>fish_weights <span class="op">=</span>[<span class="dv">30</span>,<span class="dv">30</span>,<span class="dv">30</span>,<span class="dv">8</span>,<span class="dv">2</span>] <span class="co">#アジ,サバ,イワシ30%、タイ8%、サメ2%</span></span>
<span id="cb35-5"><a href="#cb35-5"></a><span class="bu">print</span>(random.choices(fishes,k<span class="op">=</span><span class="dv">1</span>,weights <span class="op">=</span> fish_weights))</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>[&#39;イワシ&#39;]</code></pre>
      <p></br></p>
      <p>ここで注意したいのは、<strong><code>k=1</code>と指定しても、要素数1の配列が返ってくる</strong>ことです。配列の要素を取り出すには、<code>list[0]</code>のように<strong>インデックスで指定</strong>します。</p>
      <p><code>random.choices(・・・)[0]</code>と指定することで、配列からランダムな要素を重み付きで取り出せます。</p>
      <div class="sourceCode" id="cb37"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1"></a><span class="im">import</span> random</span>
<span id="cb37-2"><a href="#cb37-2"></a></span>
<span id="cb37-3"><a href="#cb37-3"></a>fishes <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>,<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;サメ&quot;</span>]</span>
<span id="cb37-4"><a href="#cb37-4"></a>fish_weights <span class="op">=</span>[<span class="dv">30</span>,<span class="dv">30</span>,<span class="dv">30</span>,<span class="dv">8</span>,<span class="dv">2</span>] <span class="co">#アジ,サバ,イワシ30%、タイ8%、サメ2%</span></span>
<span id="cb37-5"><a href="#cb37-5"></a><span class="bu">print</span>(random.choices(fishes,k<span class="op">=</span><span class="dv">1</span>,weights <span class="op">=</span> fish_weights)[<span class="dv">0</span>])</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>イワシ</code></pre>
      <p></br></p>
      </div>
      <h2 data-number="9.4" id="応用"><span
      class="header-section-number">9.4</span> 応用</h2>
      <figure>
      <img src="figs/05/sample.gif" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>以下の要件を満たすプログラムを作成していきましょう。</p>
      <ul>
      <li><p>レア度は★1~★3まであり、排出率は以下の通りです。</p>
      <p><strong>★1</strong>: 75% <strong>★2</strong>: 20%
      <strong>★3</strong>: 5%</p></li>
      <li><p>それぞれのレア度には3種類の魚があり、以下のリストの通りです。同じレア度の中で何が選ばれるかはランダムです。</p></li>
      </ul>
      <div class="sourceCode" id="cb39" data-caption="魚のランク"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1"></a>STAR_1 <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>]</span>
<span id="cb39-2"><a href="#cb39-2"></a>STAR_2 <span class="op">=</span> [<span class="st">&quot;カワハギ&quot;</span>,<span class="st">&quot;タチウオ&quot;</span>,<span class="st">&quot;メバル&quot;</span>]</span>
<span id="cb39-3"><a href="#cb39-3"></a>STAR_3 <span class="op">=</span> [<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;スズキ&quot;</span>,<span class="st">&quot;カサゴ&quot;</span>]</span></code></pre></div>
      <p></br></p>
      <p>先ほどの例をそのまま使えば以下のようになりますが、これではあまりよくありません。</p>
      <div class="sourceCode" id="cb40" data-caption="良くない例"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1"></a><span class="im">import</span> random</span>
<span id="cb40-2"><a href="#cb40-2"></a></span>
<span id="cb40-3"><a href="#cb40-3"></a>FISH_LIST <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>,<span class="st">&quot;カワハギ&quot;</span>,<span class="st">&quot;タチウオ&quot;</span>,<span class="st">&quot;メバル&quot;</span>,<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;スズキ&quot;</span>,<span class="st">&quot;カサゴ&quot;</span>]</span>
<span id="cb40-4"><a href="#cb40-4"></a>FISH_WEIGHT <span class="op">=</span> [<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">25</span>,<span class="dv">20</span><span class="op">/</span><span class="dv">3</span>,<span class="dv">20</span><span class="op">/</span><span class="dv">3</span>,<span class="dv">20</span><span class="op">/</span><span class="dv">3</span>,<span class="dv">5</span><span class="op">/</span><span class="dv">3</span>,<span class="dv">5</span><span class="op">/</span><span class="dv">3</span>,<span class="dv">5</span><span class="op">/</span><span class="dv">3</span>] <span class="co">#それぞれの排出率</span></span>
<span id="cb40-5"><a href="#cb40-5"></a><span class="bu">print</span>(random.choices(FISH_LIST,k<span class="op">=</span><span class="dv">1</span>,weights<span class="op">=</span>FISH_WEIGHT)[<span class="dv">0</span>])</span></code></pre></div>
      <p>要件通りには動くのですが、他人や未来の自分にとって読みにくく、何か改良しようとすると大変なコードです。具体的には以下の欠点が挙げられます。</p>
      <ul>
      <li>どの魚がどのランクなのかわかりにくい</li>
      <li>それぞれのランクの排出率がわかりにくい</li>
      <li>魚の種類を追加したとき、<code>FISH_WEIGHT</code>を何か所も変更する必要がある。</li>
      </ul>
      <p></br></p>
      <p>これらを解決するためにはどうすれば良いでしょうか。</p>
      <p>今回は<strong>初めにレア度を排出率に従って決定し、次にその中からランダムに魚を選ぶ方法</strong>を取りましょう。まずは排出率に従って「★n」と表示するプログラムを作成します。</p>
      <div class="sourceCode" id="cb41"
      data-caption="レア度を排出率に従って決定する"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1"></a><span class="im">import</span> random</span>
<span id="cb41-2"><a href="#cb41-2"></a></span>
<span id="cb41-3"><a href="#cb41-3"></a>FISH_LIST <span class="op">=</span> [<span class="st">&quot;★1&quot;</span>,<span class="st">&quot;★2&quot;</span>,<span class="st">&quot;★3&quot;</span>] </span>
<span id="cb41-4"><a href="#cb41-4"></a>FISH_WEIGHT <span class="op">=</span> [<span class="dv">75</span>,<span class="dv">20</span>,<span class="dv">5</span>] <span class="co">#★1～3の排出率</span></span>
<span id="cb41-5"><a href="#cb41-5"></a><span class="bu">print</span>(random.choices(FISH_LIST,k<span class="op">=</span><span class="dv">1</span>,weights<span class="op">=</span>FISH_WEIGHT)[<span class="dv">0</span>])</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>★1</code></pre>
      <p></br></p>
      <p>次に、「★n」の部分をそれぞれの魚のリストに置き換えます。</p>
      <div class="sourceCode" id="cb43"
      data-caption="レア度を排出率に従って決定する"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1"></a><span class="im">import</span> random</span>
<span id="cb43-2"><a href="#cb43-2"></a></span>
<span id="cb43-3"><a href="#cb43-3"></a>STAR_1 <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>]</span>
<span id="cb43-4"><a href="#cb43-4"></a>STAR_2 <span class="op">=</span> [<span class="st">&quot;カワハギ&quot;</span>,<span class="st">&quot;タチウオ&quot;</span>,<span class="st">&quot;メバル&quot;</span>]</span>
<span id="cb43-5"><a href="#cb43-5"></a>STAR_3 <span class="op">=</span> [<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;スズキ&quot;</span>,<span class="st">&quot;カサゴ&quot;</span>]</span>
<span id="cb43-6"><a href="#cb43-6"></a></span>
<span id="cb43-7"><a href="#cb43-7"></a>FISH_LIST <span class="op">=</span> [STAR_1,STAR_2,STAR_3] <span class="co">#2次元配列であることに注意！</span></span>
<span id="cb43-8"><a href="#cb43-8"></a>FISH_WEIGHT <span class="op">=</span> [<span class="dv">75</span>,<span class="dv">20</span>,<span class="dv">5</span>] <span class="co">#★1～3の排出率</span></span>
<span id="cb43-9"><a href="#cb43-9"></a><span class="bu">print</span>(random.choices(FISH_LIST,k<span class="op">=</span><span class="dv">1</span>,weights<span class="op">=</span>FISH_WEIGHT)[<span class="dv">0</span>])</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>[&#39;アジ&#39;, &#39;サバ&#39;, &#39;イワシ&#39;]</code></pre>
      <p></br></p>
      <p>リストが出力されているので、さらにこれを<code>random.choice()</code>で選択すれば良いですね。</p>
      <div class="sourceCode" id="cb45"
      data-caption="randomfish.py"><pre
      class="sourceCode numberSource python numberLines"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1"></a><span class="im">import</span> random</span>
<span id="cb45-2"><a href="#cb45-2"></a></span>
<span id="cb45-3"><a href="#cb45-3"></a>STAR_1 <span class="op">=</span> [<span class="st">&quot;アジ&quot;</span>,<span class="st">&quot;サバ&quot;</span>,<span class="st">&quot;イワシ&quot;</span>]</span>
<span id="cb45-4"><a href="#cb45-4"></a>STAR_2 <span class="op">=</span> [<span class="st">&quot;カワハギ&quot;</span>,<span class="st">&quot;タチウオ&quot;</span>,<span class="st">&quot;メバル&quot;</span>]</span>
<span id="cb45-5"><a href="#cb45-5"></a>STAR_3 <span class="op">=</span> [<span class="st">&quot;タイ&quot;</span>,<span class="st">&quot;スズキ&quot;</span>,<span class="st">&quot;カサゴ&quot;</span>]</span>
<span id="cb45-6"><a href="#cb45-6"></a></span>
<span id="cb45-7"><a href="#cb45-7"></a>FISH_LIST <span class="op">=</span> [STAR_1,STAR_2,STAR_3] <span class="co">#2次元配列であることに注意！</span></span>
<span id="cb45-8"><a href="#cb45-8"></a>FISH_WEIGHT <span class="op">=</span> [<span class="dv">75</span>,<span class="dv">20</span>,<span class="dv">5</span>] <span class="co">#★1～3の排出率</span></span>
<span id="cb45-9"><a href="#cb45-9"></a></span>
<span id="cb45-10"><a href="#cb45-10"></a><span class="bu">print</span>(random.choice(random.choices(FISH_LIST,k<span class="op">=</span><span class="dv">1</span>,weights<span class="op">=</span>FISH_WEIGHT)[<span class="dv">0</span>]))</span></code></pre></div>
      <p><strong><i class="fa-solid fa-terminal"></i>
      実行結果</strong></p>
      <pre><code>サバ</code></pre>
      <p></br></p>
      <p><strong>うまくいきました！これは釣りゲームの部品になるので、後で再利用できるように適当な名前を付けて保存しておきましょう。</strong>
      これはよくない例と比較して格段に修正、改造しやすくなっています。次のChallengeで確認してください。</p>
      <hr />
      <ul>
      <li><strong>Challenge2-1</strong>　上のプログラムを改造して、★2に「コイ」を追加しましょう。</li>
      <li><strong>Challenge2-2</strong>　<strong>★4</strong>の魚を追加してみましょう。排出率も適当に調節してください。</li>
      </ul>
      <!-- ---------------------------------------- -->
    </main>

    <footer class="markdown-body">
      <p><a href="https://k-768.github.io/PythonGameProgramming/">講義資料のIndexに移動</a></p>
    </footer>

    <script>
      window.onload = function () {
        // ナビゲーション関連
        let openBtn = document.getElementsByClassName("openbtn")[0];
        let navPnl = document.getElementById("g-nav");
        openBtn.onclick = () => {
          openBtn.classList.toggle("active");
          navPnl.classList.toggle("panelactive");
        };

        let items = navPnl.getElementsByTagName("a");
        Array.from(items).forEach((item) => {
          item.onclick = () => {
            openBtn.classList.toggle("active");
            navPnl.classList.toggle("panelactive");
          };
        });

        // マスク処理
        let maskedSpans = document.getElementsByClassName("masked");
        Array.from(maskedSpans).forEach((span) => {
          span.onclick = () => {
            span.classList.toggle("open");
          };
        });

        // data-startfrom 属性の行番号カウンタのリセット
        document.querySelectorAll("div.sourceCode").forEach(function (div) {
          var startFrom = div.getAttribute("data-startfrom");
          if (startFrom != null) {
            div.style.counterReset = "pg-line " + (startFrom - 1);
          }
        });

        // 画像にリンクを付与
        // let images = document.querySelectorAll("figure img");
        // Array.from(images).forEach((img) => {
        //   img.onclick = () => {
        //     location.href = img.getAttribute("src");
        //   };
        // });
      };
    </script>
  </body>
</html>
